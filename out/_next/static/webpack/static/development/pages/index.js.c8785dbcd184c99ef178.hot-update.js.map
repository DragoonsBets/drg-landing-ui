{"version":3,"file":"static/webpack/static\\development\\pages\\index.js.c8785dbcd184c99ef178.hot-update.js","sources":["webpack:///./components/SuscribeForm.js"],"sourcesContent":["import React from 'react'\r\nimport styled from 'styled-components'\r\nimport axios from 'axios'\r\nimport { Form, Message, Checkbox, Divider } from 'semantic-ui-react'\r\nimport DrgButton from './Buttons'\r\nimport DrgInput from './DrgInputs'\r\nimport DrgDropdown from './DrgDropdown'\r\nimport Typography from './Typography'\r\nimport { CREATE_USERS } from '../networking/endpoints'\r\nimport { socialLogin } from './SocialLoginHelper'\r\n\r\nconst SuscribeFormWrapper = styled.div`\r\n  &&& {\r\n    display: flex;\r\n    align-items: center;\r\n    flex-direction: column;\r\n    padding: 0 20px;\r\n    font-family: Montserrat, Raleway;\r\n    input,\r\n    h3,\r\n    h4 {\r\n      font-family: Montserrat, Raleway;\r\n    }\r\n  }\r\n`\r\n\r\nconst XForm = styled(Form)`\r\n  &&& {\r\n    > div {\r\n      display: flex;\r\n    }\r\n  }\r\n`\r\n\r\nconst XCheckbox = styled(Checkbox)`\r\n  &&& {\r\n    margin: 30px 0;\r\n  }\r\n`\r\n\r\nconst ZForm = styled.form`\r\n  &&& {\r\n    height: 55px;\r\n  }\r\n`\r\n\r\nconst SocialButtons = styled.div`\r\n  &&& {\r\n    display: flex;\r\n    justify-content: center;\r\n    flex-wrap: wrap;\r\n    text-align: center;\r\n    border-bottom: 1px solid #333333;\r\n    > form {\r\n      margin: 0 5px;\r\n    }\r\n  }\r\n`\r\n\r\nexport default class SuscribeForm extends React.Component {\r\n  constructor() {\r\n    super()\r\n    this.state = {\r\n      firstName: '',\r\n      lastName: '',\r\n      email: '',\r\n      termsAccepted: false,\r\n      suscribeAccepted: false,\r\n      birthday: {\r\n        day: 1,\r\n        month: 1,\r\n        year: 1970,\r\n      },\r\n      error: false,\r\n      message: '',\r\n      success: false,\r\n      loading: true,\r\n    }\r\n\r\n    this.handleInputChange = this.handleInputChange.bind(this)\r\n    this.handleSubmit = this.handleSubmit.bind(this)\r\n    this.handleDropdownChange = this.handleDropdownChange.bind(this)\r\n    this.handleMonthChange = this.handleMonthChange.bind(this)\r\n  }\r\n\r\n  handleInputChange(event, data) {\r\n    const target = event.target\r\n    const value = data && data.type === 'checkbox' ? data.checked : target.value\r\n    const name = data && data.type === 'checkbox' ? data.name : target.name\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    })\r\n  }\r\n\r\n  handleDropdownChange(event, data) {\r\n    const value = data.value\r\n    const name = data.name\r\n\r\n    var birthday = { ...this.state.birthday }\r\n    birthday[name] = value\r\n    this.setState({ birthday })\r\n  }\r\n\r\n  handleMonthChange(event, data) {\r\n    console.log('Month change: ', data)\r\n\r\n    const name = data.name\r\n\r\n    var birthday = { ...this.state.birthday }\r\n\r\n    data.options.find(function(option) {\r\n      if (data.value == option.value) {\r\n        console.log('Value option match: ', option)\r\n        console.log('birthday: ', birthday)\r\n        birthday[name] = option.key\r\n        console.log('birthday after update: ', birthday)\r\n        return\r\n      }\r\n    })\r\n\r\n    this.setState({ birthday })\r\n  }\r\n\r\n  handleSubmit = event => {\r\n    event.preventDefault()\r\n    const form = event.target\r\n    this.state.loading = true\r\n\r\n    if (!form.checkValidity()) {\r\n      this.state.error = true\r\n      this.state.message = 'Ocurrió un error enviando el formulario'\r\n      this.state.loading = false\r\n      return\r\n    }\r\n\r\n    if (!this.state.termsAccepted) {\r\n      this.state.error = true\r\n      this.state.message = 'Debes aceptar los términos y condiciones'\r\n      this.state.loading = false\r\n      return\r\n    }\r\n\r\n    console.log('user: ', this.state['birthday'])\r\n\r\n    const user = {\r\n      first_name: this.state['firstName'],\r\n      last_name: this.state['lastName'],\r\n      email: this.state['email'],\r\n      birthday: new Date(\r\n        this.state['birthday']['year'],\r\n        this.state['birthday']['month'] - 1,\r\n        this.state['birthday']['day'],\r\n      ),\r\n      subscribed_to_news: this.state['suscribeAccepted'],\r\n    }\r\n\r\n    axios\r\n      .post(\r\n        CREATE_USERS,\r\n        { ...user },\r\n        {\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n        },\r\n      )\r\n      .then(res => {\r\n        this.state.success = true\r\n        this.state.message = 'Gracias por registrarte'\r\n        this.state.loading = false\r\n      })\r\n      .catch(error => {\r\n        this.state.error = true\r\n        this.state.message = 'Ocurrió un error registrandote'\r\n        this.state.loading = false\r\n      })\r\n  }\r\n\r\n  render() {\r\n    const days = []\r\n    const months = [\r\n      { key: 1, value: 'Enero', text: 'Enero' },\r\n      { key: 2, value: 'Febrero', text: 'Febrero' },\r\n      { key: 3, value: 'Marzo', text: 'Marzo' },\r\n      { key: 4, value: 'Abril', text: 'Abril' },\r\n      { key: 5, value: 'Mayo', text: 'Mayo' },\r\n      { key: 6, value: 'Junio', text: 'Junio' },\r\n      { key: 7, value: 'Julio', text: 'Julio' },\r\n      { key: 8, value: 'Agosto', text: 'Agosto' },\r\n      { key: 9, value: 'Setiembre', text: 'Setiembre' },\r\n      { key: 10, value: 'Octubre', text: 'Octubre' },\r\n      { key: 11, value: 'Noviembre', text: 'Noviembre' },\r\n      { key: 12, value: 'Diciembre', text: 'Diciembre' },\r\n    ]\r\n\r\n    const years = []\r\n\r\n    var d = new Date()\r\n    var currentYear = d.getFullYear()\r\n    var oldest = d.getFullYear() - 81\r\n\r\n    for (let i = 1; i < 32; i++) {\r\n      var day = { key: i, value: i, text: i }\r\n      days.push(day)\r\n    }\r\n\r\n    for (let i = currentYear; i > oldest; i--) {\r\n      var year = { key: i, value: i, text: i }\r\n      years.push(year)\r\n    }\r\n\r\n    return (\r\n      <SuscribeFormWrapper>\r\n        <Typography h={3} weight=\"bold\" size=\"jumbo\">\r\n          Únete al grupo\r\n        </Typography>\r\n        <Divider />\r\n        <Typography h={4} weight=\"thin\" size=\"title\">\r\n          Ingresa con tus redes sociales\r\n        </Typography>\r\n        <SocialButtons>\r\n          <ZForm action=\"https://drg-bets.jx-staging.viserion.dragoons.gg/accounts/steam/login/?process=login\">\r\n            <DrgButton small=\"true\" type=\"submit\">\r\n              Steam\r\n            </DrgButton>\r\n          </ZForm>\r\n\r\n          <ZForm action=\"https://drg-bets.jx-staging.viserion.dragoons.gg/accounts/google/login/?process=login\">\r\n            <DrgButton small=\"true\" type=\"submit\">\r\n              Google\r\n            </DrgButton>\r\n          </ZForm>\r\n\r\n          <ZForm action=\"https://drg-bets.jx-staging.viserion.dragoons.gg/accounts/facebook/login/?process=login\">\r\n            <DrgButton small=\"true\" type=\"submit\">\r\n              Facebook\r\n            </DrgButton>\r\n          </ZForm>\r\n        </SocialButtons>\r\n        <Typography h={4} weight=\"thin\" size=\"title\">\r\n          ó crea una cuenta\r\n        </Typography>\r\n        <XForm onSubmit={this.handleSubmit}>\r\n          <DrgInput\r\n            name=\"firstName\"\r\n            label=\"Nombre\"\r\n            placeholder=\"tu nombre\"\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n          <br />\r\n          <DrgInput\r\n            name=\"lastName\"\r\n            label=\"Apellido\"\r\n            placeholder=\"tu apellido\"\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n          <br />\r\n          <DrgInput\r\n            name=\"email\"\r\n            label=\"Email\"\r\n            placeholder=\"tu email\"\r\n            onChange={this.handleInputChange}\r\n            required\r\n          />\r\n          <br />\r\n          <Divider />\r\n          <div style={{ flexDirection: 'column', alignItems: 'center' }}>\r\n            <Typography h={4} weight=\"thin\" size=\"title\">\r\n              Fecha de nacimiento\r\n            </Typography>\r\n            <div style={{ display: 'flex' }}>\r\n              <DrgDropdown\r\n                tag={'Día'}\r\n                name=\"day\"\r\n                options={days}\r\n                onChange={this.handleDropdownChange}\r\n              />\r\n              <DrgDropdown\r\n                tag={'Mes'}\r\n                name=\"month\"\r\n                options={months}\r\n                onChange={this.handleMonthChange}\r\n              />\r\n              <DrgDropdown\r\n                tag={'Año'}\r\n                name=\"year\"\r\n                options={years}\r\n                onChange={this.handleDropdownChange}\r\n              />\r\n            </div>\r\n          </div>\r\n          <br />\r\n          <Divider />\r\n          <XCheckbox\r\n            name=\"termsAccepted\"\r\n            onChange={this.handleInputChange}\r\n            label=\"Acepto los términos y condiciones.\"\r\n          />\r\n          <XCheckbox\r\n            name=\"suscribeAccepted\"\r\n            onChange={this.handleInputChange}\r\n            label=\"Deseo recibir noticias y novedades.\"\r\n          />\r\n          <div>\r\n            <Message\r\n              hidden={!this.state.success}\r\n              visible={this.state.success}\r\n              header=\"Registro exitoso\"\r\n              success={this.state.success}\r\n              content={this.state.message}\r\n            />\r\n            <Message\r\n              visible={this.state.error}\r\n              hidden={!this.state.error}\r\n              header=\"Ocurrió un error\"\r\n              error={this.state.error}\r\n              content={this.state.message}\r\n            />\r\n          </div>\r\n          <DrgButton type=\"submit\" large=\"true\">\r\n            Crear\r\n          </DrgButton>\r\n        </XForm>\r\n      </SuscribeFormWrapper>\r\n    )\r\n  }\r\n}\r\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AAAA;AAeA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AACA;AAYA;;;;;AACA;AAAA;AACA;AADA;AACA;AAAA;AACA;AAFA;AAiEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AAKA;AATA;AAYA;AAKA;AACA;AADA;AADA;AAOA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AApHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAHA;AAKA;AACA;AACA;AACA;AAdA;AAiBA;AACA;AACA;AACA;AAtBA;AAuBA;AACA;;;AACA;AACA;AACA;AACA;AAEA;AAGA;;;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AAAA;AAAA;AACA;;;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAAA;AAAA;AACA;;;AAyDA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AACA;AACA;AACA;AAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AACA;AACA;AAHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;;;;AA7QA;AACA;;;;;A","sourceRoot":""}